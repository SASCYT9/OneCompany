# 🎮 Telegram Bot з Inline Кнопками

## 🎯 Що таке Inline Keyboard?

Це **інтерактивні кнопки** прямо під повідомленням бота - як в Telegram Wallet!

✅ Без введення команд  
✅ Інтуїтивно зрозуміло  
✅ Красиво та сучасно  
✅ Швидка навігація  

---

## 📱 Головне меню (після /start)

```
Вітаємо! 👋

🏆 OneCompany
Преміум автомобільні та мотоциклетні запчастини

💎 Понад 200 світових брендів
⚡ Швидка доставка по Україні
🔧 Професійна консультація

👇 Оберіть що вас цікавить:

┌──────────────────┬──────────────────┐
│ 🏆 Наші бренди   │  📱 Контакти     │
├──────────────────┼──────────────────┤
│ 🌐 Web3 Dashboard│  ❓ Допомога     │
├──────────────────┴──────────────────┤
│ 🚗 Авто запчастини│🏍️ Мото запчастини│
└─────────────────────────────────────┘
```

---

## 🎨 Структура меню

### 1. **🏆 Наші бренди**

Відкриває вибір категорії:

```
🏆 Наші преміум бренди

Оберіть категорію:

┌────────────────┬────────────────┐
│ 🚗 Авто бренди │ 🏍️ Мото бренди │
├────────────────┴────────────────┤
│      🌐 Всі 200+ брендів        │
├─────────────────────────────────┤
│           ◀️ Назад               │
└─────────────────────────────────┘
```

#### 1.1 **🚗 Авто бренди**

Показує топ автомобільні бренди:

```
🚗 Преміум автомобільні бренди:

• KW Suspension - підвіска
• Eventuri - впускні системи
• FI Exhaust - випускні системи
• Brembo - гальмівні системи
• Akrapovic - випуски
• Mansory - тюнінг
• Novitec - тюнінг Ferrari/Lamborghini
• Brabus - тюнінг Mercedes

💡 Хочете підібрати для вашого авто?

┌─────────────────────────────────┐
│      📝 Залишити заявку          │
├─────────────────────────────────┤
│           ◀️ Назад               │
└─────────────────────────────────┘
```

#### 1.2 **🏍️ Мото бренди**

Показує топ мотоциклетні бренди:

```
🏍️ Преміум мотоциклетні бренди:

• SC-Project - випускні системи
• Rizoma - аксесуари
• Arrow - випуски
• Termignoni - випуски
• Yoshimura - тюнінг
• Öhlins - підвіска
• Brembo Racing - гальма
• Akrapovic - випуски

💡 Хочете підібрати для вашого мото?

┌─────────────────────────────────┐
│      📝 Залишити заявку          │
├─────────────────────────────────┤
│           ◀️ Назад               │
└─────────────────────────────────┘
```

#### 1.3 **🌐 Всі 200+ брендів**

Посилання на сайт:

```
🌐 Всі наші бренди

📱 Переглянути повний каталог 200+ преміум брендів:

👉 https://onecompany.com.ua/brands

✨ На сайті ви знайдете:
• Детальну інформацію про кожен бренд
• Фото та характеристики
• Наявність на складі
• Можливість замовлення online

┌─────────────────────────────────┐
│           ◀️ Назад               │
└─────────────────────────────────┘
```

---

### 2. **📱 Контакти**

Контактна інформація:

```
📞 Контактна інформація:

📧 Email: info@onecompany.com
📱 Телефон: +380 12 345 67 89
📍 Київ, Україна

⏰ Графік роботи:
Пн-Пт: 9:00 - 18:00
Сб: 10:00 - 16:00
Нд: вихідний

💬 Або напишіть нам прямо тут!

┌─────────────────────────────────┐
│           ◀️ Назад               │
└─────────────────────────────────┘
```

---

### 3. **🌐 Web3 Dashboard**

Посилання на панель управління:

```
🌐 Web3 Dashboard

📊 Панель управління повідомленнями:

🔗 http://localhost:3001/messages

🔐 Авторизація:
Пароль доступний для адміністраторів.

✨ Можливості:
• Перегляд всіх повідомлень
• Фільтри: Auto/Moto/Telegram
• Пошук та статуси
• Архівування та видалення
• Real-time оновлення

┌─────────────────────────────────┐
│           ◀️ Назад               │
└─────────────────────────────────┘
```

---

### 4. **❓ Допомога**

Інструкції та швидкі заявки:

```
❓ Як ми можемо допомогти:

1️⃣ Підібрати деталі для вашого авто/мото
2️⃣ Проконсультувати по наявності та цінам
3️⃣ Організувати доставку та встановлення
4️⃣ Технічна підтримка та консультації

💡 Як замовити:

• Натисніть кнопку нижче для швидкої заявки
• Або просто напишіть що вам потрібно:
  - Марка та модель транспорту
  - Що саме шукаєте
  - Бюджет (необов'язково)

⏱️ Відповідаємо протягом 15 хвилин!

┌──────────────────┬──────────────────┐
│🚗 Заявка для авто│🏍️ Заявка для мото│
├──────────────────┴──────────────────┤
│           ◀️ Назад                   │
└─────────────────────────────────────┘
```

---

### 5. **🚗 Авто запчастини / 🏍️ Мото запчастини**

Форма заявки:

#### Для авто:
```
🚗 Заявка на автомобільні запчастини

Привіт, [Ім'я]!

Будь ласка, напишіть:

1️⃣ Марка та модель авто (наприклад: BMW M3 F80)
2️⃣ Що саме шукаєте (наприклад: випускна система Akrapovic)
3️⃣ Бюджет (необов'язково)

💬 Просто напишіть все одним повідомленням!
```

#### Для мото:
```
🏍️ Заявка на мотоциклетні запчастини

Привіт, [Ім'я]!

Будь ласка, напишіть:

1️⃣ Марка та модель мото (наприклад: Ducati Panigale V4)
2️⃣ Що саме шукаєте (наприклад: випуск SC-Project)
3️⃣ Бюджет (необов'язково)

💬 Просто напишіть все одним повідомленням!
```

---

## 🔄 User Flow

### Приклад 1: Пошук авто запчастин

```
User: /start
  ↓
Bot: [Головне меню з кнопками]
  ↓
User: [Натискає "🚗 Авто запчастини"]
  ↓
Bot: [Форма заявки для авто]
  ↓
User: BMW M5 F90, випуск Akrapovic, до 5000€
  ↓
Bot: [Підтвердження + кнопки "Бренди" / "Контакти" / "Головне меню"]
Manager: [Отримує повідомлення в TELEGRAM_CHAT_ID]
```

---

### Приклад 2: Перегляд брендів

```
User: /start
  ↓
Bot: [Головне меню]
  ↓
User: [Натискає "🏆 Наші бренди"]
  ↓
Bot: [Вибір категорії]
  ↓
User: [Натискає "🚗 Авто бренди"]
  ↓
Bot: [Список авто брендів + кнопка "Залишити заявку"]
  ↓
User: [Натискає "📝 Залишити заявку"]
  ↓
Bot: [Форма заявки]
  ↓
User: Ferrari 488, карбонові деталі Novitec
```

---

### Приклад 3: Доступ до Dashboard

```
User: /start
  ↓
Bot: [Головне меню]
  ↓
User: [Натискає "🌐 Web3 Dashboard"]
  ↓
Bot: [Посилання на http://localhost:3001/messages]
  ↓
User: [Відкриває посилання → вводить пароль → доступ]
```

---

## 🛠️ Технічна реалізація

### Callback Data Format

Всі кнопки використовують `callback_data` з префіксом `btn_`:

```typescript
{
  text: '🏆 Наші бренди',
  callback_data: 'btn_brands'
}
```

### Основні callbacks:

| Callback Data         | Дія                              |
|-----------------------|----------------------------------|
| `btn_brands`          | Вибір категорії брендів          |
| `btn_auto_brands`     | Авто бренди                      |
| `btn_moto_brands`     | Мото бренди                      |
| `btn_all_brands`      | Всі бренди (посилання на сайт)   |
| `btn_contact`         | Контактна інформація             |
| `btn_dashboard`       | Посилання на Web3 Dashboard      |
| `btn_help`            | Допомога та інструкції           |
| `btn_auto`            | Заявка для авто                  |
| `btn_moto`            | Заявка для мото                  |
| `btn_request_auto`    | Форма заявки авто                |
| `btn_request_moto`    | Форма заявки мото                |
| `btn_back`            | Повернутись до головного меню    |

---

## 📊 Обробка Callbacks

### В `route.ts`:

```typescript
// Обробка callback_query
if (update.callback_query) {
  const callbackQuery = update.callback_query;
  const chatId = callbackQuery.message?.chat.id || 0;
  const data = callbackQuery.data || '';
  
  // Підтверджуємо callback
  await answerCallbackQuery(callbackQuery.id);
  
  // Обробляємо кнопку
  await handleButtonCallback(chatId, data, userName);
}
```

### Функція `handleButtonCallback`:

```typescript
async function handleButtonCallback(chatId, data, userName) {
  switch (data) {
    case 'btn_brands':
      // Відправити меню вибору категорії
      break;
    case 'btn_auto':
      // Відправити форму заявки для авто
      break;
    // ... інші кейси
  }
}
```

---

## 🎯 Переваги Inline Keyboard

### ✅ Для користувачів:

- **Інтуїтивно** - не треба запам'ятовувати команди
- **Швидко** - один клік замість введення тексту
- **Зручно** - навігація як в додатку
- **Красиво** - сучасний UX/UI

### ✅ Для бізнесу:

- **Більше конверсій** - простіше залишити заявку
- **Менше помилок** - користувач не може ввести щось не те
- **Краща аналітика** - бачимо що клікають
- **Професійний вигляд** - як великі бренди (Wallet, Binance, etc.)

---

## 🔧 Як додати нову кнопку

### 1. Додати в головне меню:

```typescript
[
  { text: '🆕 Нова функція', callback_data: 'btn_new_feature' }
]
```

### 2. Додати обробку в `handleButtonCallback`:

```typescript
case 'btn_new_feature':
  await sendTelegramMessageWithButtons(
    chatId,
    'Текст повідомлення',
    [
      [
        { text: 'Кнопка 1', callback_data: 'btn_action1' }
      ],
      [
        { text: '◀️ Назад', callback_data: 'btn_back' }
      ]
    ]
  );
  break;
```

### 3. Готово! 🎉

---

## 🚀 Тестування

### 1. Запустіть бота:
```bash
npm run dev
```

### 2. Відкрийте Telegram бота

### 3. Відправте `/start`

### 4. Натисніть на кнопки та перевірте:
- ✅ Всі кнопки працюють
- ✅ Навігація "Назад" працює
- ✅ Форми заявок відкриваються
- ✅ Посилання на Dashboard працює

---

## 📝 Приклади з інших ботів

### Telegram Wallet style:
```
┌──────────────────────────────────┐
│           💰 Баланс              │
├──────────────────┬───────────────┤
│   📤 Відправити  │ 📥 Отримати   │
├──────────────────┴───────────────┤
│         💱 Обмін валют           │
├──────────────────────────────────┤
│         ⚙️ Налаштування          │
└──────────────────────────────────┘
```

### OneCompany style (ваш бот):
```
┌──────────────────┬───────────────┐
│ 🏆 Наші бренди   │ 📱 Контакти   │
├──────────────────┼───────────────┤
│🌐 Web3 Dashboard │ ❓ Допомога   │
├──────────────────┴───────────────┤
│🚗 Авто запчастини│🏍️ Мото запчастини│
└──────────────────────────────────┘
```

---

**Готово! 🎉**

Тепер ваш Telegram бот має інтерактивні кнопки як в найкращих ботах світу!

**Інтуїтивно. Красиво. Ефективно.** ✨
