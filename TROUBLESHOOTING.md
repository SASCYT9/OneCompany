# üîß Troubleshooting: Bot –Ω–µ –ø—Ä–∞—Ü—é—î

## ‚ùå –ü–æ–º–∏–ª–∫–∞: "Failed to process submission"

### üîç –ü—Ä–∏—á–∏–Ω–∏:

1. **Dev —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π** –ø—ñ—Å–ª—è –∑–º—ñ–Ω –∫–æ–¥—É
2. **Telegram API –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î** (–º–æ–∂–ª–∏–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –∞–±–æ chat ID)
3. **–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è** –Ω–µ –ø—ñ–¥—Ö–æ–ø–∏–ª–∏—Å—è

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### 1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å dev —Å–µ—Ä–≤–µ—Ä**

```bash
# –ó—É–ø–∏–Ω—ñ—Ç—å –ø–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ü–µ—Å (Ctrl+C)
# –ü–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç—ñ—Ç—å –∑–Ω–æ–≤—É:
npm run dev
```

### 2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env.local**

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –≤—Å—ñ –∑–º—ñ–Ω–Ω—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ:

```bash
# –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ:
TELEGRAM_BOT_TOKEN=8449589510:AAHFS3DVvVd--pCqsFPUIEji1IeJ8MOVJc4
TELEGRAM_CHAT_ID=-4715426437
TELEGRAM_AUTO_CHAT_ID=-4715426437
TELEGRAM_MOTO_CHAT_ID=-4715426437
NEXT_PUBLIC_SITE_URL=http://localhost:3001
ADMIN_PASSWORD=admin123
```

### 3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Telegram Bot API**

```bash
# PowerShell –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–æ—Ç–∞:
$token = "8449589510:AAHFS3DVvVd--pCqsFPUIEji1IeJ8MOVJc4"
Invoke-WebRequest -Uri "https://api.telegram.org/bot$token/getMe" | Select-Object -ExpandProperty Content
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å –º–∞—î –±—É—Ç–∏:
```json
{
  "ok": true,
  "result": {
    "id": 8449589510,
    "is_bot": true,
    "first_name": "YourBotName",
    ...
  }
}
```

### 4. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è webhook endpoint**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É:
curl http://localhost:3001/api/telegram/webhook

# –í—ñ–¥–ø–æ–≤—ñ–¥—å –º–∞—î –±—É—Ç–∏:
{
  "status": "active",
  "webhook": "ready",
  "bot_configured": true,
  "chat_configured": true,
  "timestamp": "2025-11-13T..."
}
```

### 5. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤**

```bash
# PowerShell —Ç–µ—Å—Ç:
$body = @{
    type = "auto"
    carModel = "BMW M3 F80"
    vin = "TEST123"
    wishes = "Akrapovic exhaust"
    budget = "5000"
    email = "test@example.com"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:3001/api/contact" -Method POST -Body $body -ContentType "application/json"
```

–£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "ok": true,
  "messageId": "msg_1699888888888_abc123"
}
```

---

## üêõ Debug —Ä–µ–∂–∏–º

### –î–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –¥–µ –∑–∞–ø—É—â–µ–Ω–∏–π `npm run dev`:

**–•–æ—Ä–æ—à—ñ –ª–æ–≥–∏:**
```
‚úÖ Message saved to store: msg_1699888888888_abc123
‚úÖ Telegram notification sent successfully
```

**–ü–æ–≥–∞–Ω—ñ –ª–æ–≥–∏:**
```
‚ùå Telegram environment variables are not set!
‚ö†Ô∏è Telegram notification failed: Missing bot env
‚ùå Telegram error (non-blocking): Failed to send message
```

---

## üîÑ –Ø–∫—â–æ –±–æ—Ç –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î:

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –±–æ—Ç –∞–∫—Ç–∏–≤–Ω–∏–π

–í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram ‚Üí –∑–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ ‚Üí –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ `/start`

–ú–∞—î –ø—Ä–∏–π—Ç–∏ –º–µ–Ω—é –∑ –∫–Ω–æ–ø–∫–∞–º–∏:
```
–í—ñ—Ç–∞—î–º–æ! üëã

üèÜ OneCompany
...

[üèÜ –ù–∞—à—ñ –±—Ä–µ–Ω–¥–∏] [üì± –ö–æ–Ω—Ç–∞–∫—Ç–∏]
[üåê Web3 Dashboard] [‚ùì –î–æ–ø–æ–º–æ–≥–∞]
[üöó –ê–≤—Ç–æ] [üèçÔ∏è –ú–æ—Ç–æ]
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ webhook

```bash
# GET –∑–∞–ø–∏—Ç –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó webhook:
curl http://localhost:3001/api/telegram/setup
```

–¶–µ –∑–∞—Ä–µ—î—Å—Ç—Ä—É—î webhook –¥–ª—è production. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ webhook –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Chat ID

–í Telegram:
1. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø—É
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—É
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: `https://api.telegram.org/bot<TOKEN>/getUpdates`
4. –ó–Ω–∞–π–¥—ñ—Ç—å `"chat":{"id":-1234567890}` - —Ü–µ –≤–∞—à Chat ID

---

## üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Messages Dashboard

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ: http://localhost:3001/messages
2. –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å: `admin123`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è:
   - –í—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
   - –í—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram –±–æ—Ç–∞

---

## üéØ Quick Fix Checklist

- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤ `npm run dev`
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏–≤ `.env.local` - –≤—Å—ñ –∑–º—ñ–Ω–Ω—ñ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞–≤ Telegram API - –±–æ—Ç –ø—Ä–∞—Ü—é—î
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞–≤ `/api/telegram/webhook` - –ø–æ–≤–µ—Ä—Ç–∞—î 200
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞–≤ `/api/contact` - –ø–æ–≤–µ—Ä—Ç–∞—î `{"ok":true}`
- [ ] –í—ñ–¥–∫—Ä–∏–≤ `/messages` dashboard - –±–∞—á—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- [ ] –í—ñ–¥–ø—Ä–∞–≤–∏–≤ `/start` –≤ Telegram - –æ—Ç—Ä–∏–º–∞–≤ –º–µ–Ω—é –∑ –∫–Ω–æ–ø–∫–∞–º–∏

---

## üí° –û—Å—Ç–∞–Ω–Ω—î —Ä—ñ—à–µ–Ω–Ω—è

–Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –¥–æ–ø–æ–º–∞–≥–∞—î - **–æ—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å:**

```bash
# –ó—É–ø–∏–Ω—ñ—Ç—å dev server (Ctrl+C)

# –í–∏–¥–∞–ª—ñ—Ç—å –∫–µ—à:
Remove-Item -Recurse -Force .next

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å:
npm run dev
```

---

**–ü—ñ—Å–ª—è —Ü–∏—Ö –∫—Ä–æ–∫—ñ–≤ –±–æ—Ç –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏! üöÄ**

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –¥–µ –∑–∞–ø—É—â–µ–Ω–∏–π dev —Å–µ—Ä–≤–µ—Ä.
